<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Internal utilities for item/concept objects — prepare_query • ICU data with R</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Internal utilities for item/concept objects — prepare_query"><meta property="og:description" content="Several internal utilities for modifying, querying ans subsetting item and
concept objects, including getters and setters for itm variables,
callback functions, cncpt target classes, as well as utilities for data
loading such as prepare_query() which creates a row-subsetting
expression, do_callback(), which applies a callback function to data or
do_itm_load(), which performs data loading corresponding to an itm"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ICU data with R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/ricu.pdf">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/start.html">Quick start guide</a>
    </li>
    <li>
      <a href="../articles/uom.html">Units of measurement</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/eth-mds/ricu" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Internal utilities for <code>item</code>/<code>concept</code> objects</h1>
    
    <div class="hidden name"><code>item_utils.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Several internal utilities for modifying, querying ans subsetting item and
concept objects, including getters and setters for <code>itm</code> variables,
callback functions, <code>cncpt</code> target classes, as well as utilities for data
loading such as <code>prepare_query()</code> which creates a row-subsetting
expression, <code>do_callback()</code>, which applies a callback function to data or
<code>do_itm_load()</code>, which performs data loading corresponding to an <code>itm</code></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_query</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">try_add_vars</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, var_lst <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data_vars"</span>, <span class="st">"meta_vars"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_itm_var</span><span class="op">(</span><span class="va">x</span>, var <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data_vars"</span>, <span class="st">"meta_vars"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">set_callback</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">do_callback</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">do_itm_load</span><span class="op">(</span><span class="va">x</span>, id_type <span class="op">=</span> <span class="st">"icustay"</span>, interval <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fl">1L</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">n_tick</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">set_target</span><span class="op">(</span><span class="va">x</span>, <span class="va">target</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_target</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">subset_src</span><span class="op">(</span><span class="va">x</span>, <span class="va">src</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for item</span></span>
<span><span class="fu">subset_src</span><span class="op">(</span><span class="va">x</span>, <span class="va">src</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for cncpt</span></span>
<span><span class="fu">subset_src</span><span class="op">(</span><span class="va">x</span>, <span class="va">src</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for concept</span></span>
<span><span class="fu">subset_src</span><span class="op">(</span><span class="va">x</span>, <span class="va">src</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>Object defining the row-subsetting</p></dd>


<dt>...</dt>
<dd><p>Variable specification</p></dd>


<dt>var_lst</dt>
<dd><p>List-based variable specification</p></dd>


<dt>type</dt>
<dd><p>Variable type (either data or meta)</p></dd>


<dt>var</dt>
<dd><p>Variable name (<code>NULL</code>) returns all available</p></dd>


<dt>fun</dt>
<dd><p>Callback function (passed as string)</p></dd>


<dt>id_type</dt>
<dd><p>String specifying the patient id type to return</p></dd>


<dt>interval</dt>
<dd><p>The time interval used to discretize time stamps with,
specified as <code><a href="https://rdrr.io/r/base/difftime.html" class="external-link">base::difftime()</a></code> object</p></dd>


<dt>src</dt>
<dd><p>Character vector of data source name(s)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<ul><li><p><code>prepare_query()</code>: an unevaluated expression used for row-subsetting</p></li>
<li><p><code>try_add_vars()</code>: a (potentially) modified item object with added
variables</p></li>
<li><p><code>get_itm_var()</code>: character vector of <code>itm</code> variables</p></li>
<li><p><code>set_callback()</code>: a modified object with added callback function</p></li>
<li><p><code>do_callback()</code>: result of the callback function applied to data, most
likely (<code>id_tbl</code>/<code>ts_tbl</code>)</p></li>
<li><p><code>do_itm_load()</code>: result of item loading (<code>id_tbl</code>/<code>ts_tbl</code>)</p></li>
<li><p><code>n_tick()</code>: Integer valued number of progress bar ticks</p></li>
<li><p><code>set_target()</code>: a modified object with newly set target class</p></li>
<li><p><code>get_target()</code>: string valued target class of an object</p></li>
<li><p><code>subset_src()</code>: an object of the same type as the object passed as <code>x</code></p></li>
</ul></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nicolas Bennett, Drago Plecko, Ida-Fong Ukor.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>


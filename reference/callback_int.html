<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Internal item callback utilities — add_concept • ICU data with R</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Internal item callback utilities — add_concept" />
<meta property="og:description" content="The utility function add_concept() is exported for convenience when adding
external datasets and integrating concepts that require other concepts.
While this could be solves by defining a rec_concpt, in some scenarios
this might not be ideal, as it might be only required that itm
implementations for certain data sources require additional information.
Examples for this include vasopressor rates which might rely on patient
weight, and blood cell counts when expressed as ratio. For performance
reasons, the pulled in concept is internally cached, as this might be used
unchanged many times, when loading several concepts that need to pull in
the given concept. Persistence of cache is session-level and therefore this
utility is intended to be used somewhat sparingly." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ICU data with R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ricu.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/jss.pdf">ricu: R's Interface to Intensive Care Data (PDF)</a>
    </li>
    <li>
      <a href="../articles/uom.html">Units of measurement</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/eth-mds/ricu">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Internal item callback utilities</h1>
    
    <div class="hidden name"><code>callback_int.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The utility function <code>add_concept()</code> is exported for convenience when adding
external datasets and integrating concepts that require other concepts.
While this could be solves by defining a <code>rec_concpt</code>, in some scenarios
this might not be ideal, as it might be only required that <code>itm</code>
implementations for certain data sources require additional information.
Examples for this include vasopressor rates which might rely on patient
weight, and blood cell counts when expressed as ratio. For performance
reasons, the pulled in concept is internally cached, as this might be used
unchanged many times, when loading several concepts that need to pull in
the given concept. Persistence of cache is session-level and therefore this
utility is intended to be used somewhat sparingly.</p>
    </div>

    <pre class="usage"><span class='fu'>add_concept</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>env</span>, <span class='va'>concept</span>, var_name <span class='op'>=</span> <span class='va'>concept</span>, aggregate <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>add_weight</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>env</span>, var_name <span class='op'>=</span> <span class='st'>"weight"</span><span class='op'>)</span>

<span class='fu'>calc_dur</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>val_var</span>, <span class='va'>min_var</span>, <span class='va'>max_var</span>, grp_var <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>combine_callbacks</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Object in loading</p></td>
    </tr>
    <tr>
      <th>env</th>
      <td><p>Data source environment as available as <code>env</code> in callback
functions</p></td>
    </tr>
    <tr>
      <th>concept</th>
      <td><p>String valued concept name that will be loaded from the
default dictionary</p></td>
    </tr>
    <tr>
      <th>var_name</th>
      <td><p>String valued variable name</p></td>
    </tr>
    <tr>
      <th>aggregate</th>
      <td><p>Forwarded to <code><a href='load_concepts.html'>load_concepts()</a></code></p></td>
    </tr>
    <tr>
      <th>val_var</th>
      <td><p>String valued column name corresponding to the value variable</p></td>
    </tr>
    <tr>
      <th>min_var, max_var</th>
      <td><p>Column names denoting start and end times</p></td>
    </tr>
    <tr>
      <th>grp_var</th>
      <td><p>Optional grouping variable (for example linking infusions)</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Functions which will be successively applied</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A copy of <code>x</code> with the requested concept merged in.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nicolas Bennett, Drago Plecko, Ida-Fong Ukor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



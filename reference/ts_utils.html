<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Time series utility functions — expand • ICU data with R</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Time series utility functions — expand"><meta property="og:description" content="ICU data as handled by ricu is mostly comprised of time series data and as
such, several utility functions are available for working with time series
data in addition to a class dedicated to representing time series data (see
ts_tbl()). Some terminology to begin with: a time series is considered
to have gaps if, per (combination of) ID variable value(s), some time steps
are missing. Expanding and collapsing mean to change between
representations where time steps are explicit or encoded as interval with
start and end times. For sliding window-type operations, slide() means to
iterate over time-windows, slide_index() means to iterate over certain
time-windows, selected relative to the index and hop() means to iterate
over time-windows selected in absolute terms."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ICU data with R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/ricu.pdf">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/start.html">Quick start guide</a>
    </li>
    <li>
      <a href="../articles/uom.html">Units of measurement</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/eth-mds/ricu" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Time series utility functions</h1>
    
    <div class="hidden name"><code>ts_utils.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>ICU data as handled by <code>ricu</code> is mostly comprised of time series data and as
such, several utility functions are available for working with time series
data in addition to a class dedicated to representing time series data (see
<code><a href="id_tbl.html">ts_tbl()</a></code>). Some terminology to begin with: a time series is considered
to have gaps if, per (combination of) ID variable value(s), some time steps
are missing. Expanding and collapsing mean to change between
representations where time steps are explicit or encoded as interval with
start and end times. For sliding window-type operations, <code>slide()</code> means to
iterate over time-windows, <code>slide_index()</code> means to iterate over certain
time-windows, selected relative to the index and <code>hop()</code> means to iterate
over time-windows selected in absolute terms.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">expand</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  start_var <span class="op">=</span> <span class="fu"><a href="tbl_meta.html">index_var</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>  end_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  step_size <span class="op">=</span> <span class="fu"><a href="tbl_meta.html">time_step</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>  new_index <span class="op">=</span> <span class="va">start_var</span>,</span>
<span>  keep_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  aggregate <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">collapse</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  id_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  index_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_var <span class="op">=</span> <span class="st">"start"</span>,</span>
<span>  end_var <span class="op">=</span> <span class="st">"end"</span>,</span>
<span>  env <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  as_win_tbl <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_no_gaps</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">has_gaps</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is_regular</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">fill_gaps</span><span class="op">(</span><span class="va">x</span>, limits <span class="op">=</span> <span class="fu">collapse</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, start_var <span class="op">=</span> <span class="st">"start"</span>, end_var <span class="op">=</span> <span class="st">"end"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remove_gaps</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slide</span><span class="op">(</span><span class="va">x</span>, <span class="va">expr</span>, <span class="va">before</span>, after <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fl">0L</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">slide_index</span><span class="op">(</span><span class="va">x</span>, <span class="va">expr</span>, <span class="va">index</span>, <span class="va">before</span>, after <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fl">0L</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hop</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">expr</span>,</span>
<span>  <span class="va">windows</span>,</span>
<span>  full_window <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  lwr_col <span class="op">=</span> <span class="st">"min_time"</span>,</span>
<span>  upr_col <span class="op">=</span> <span class="st">"max_time"</span>,</span>
<span>  left_closed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  right_closed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  eval_env <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p><code>ts_tbl</code> object to use</p></dd>


<dt>start_var, end_var</dt>
<dd><p>Name of the columns that represent lower and upper
windows bounds</p></dd>


<dt>step_size</dt>
<dd><p>Controls the step size used to interpolate between
<code>start_var</code> and <code>end_var</code></p></dd>


<dt>new_index</dt>
<dd><p>Name of the new index column</p></dd>


<dt>keep_vars</dt>
<dd><p>Names of the columns to hold onto</p></dd>


<dt>aggregate</dt>
<dd><p>Function for aggregating values in overlapping intervals</p></dd>


<dt>id_vars, index_var</dt>
<dd><p>ID and index variables</p></dd>


<dt>env</dt>
<dd><p>Environment used as parent to the environment used to evaluate
expressions passes as <code>...</code></p></dd>


<dt>as_win_tbl</dt>
<dd><p>Logical flag indicating whether to return a <code>win_tbl</code> or
an <code>id_tbl</code></p></dd>


<dt>...</dt>
<dd><p>Passed to <code>hop_quo()</code> and ultimately to
<code>data.table::[()</code></p></dd>


<dt>limits</dt>
<dd><p>A table with columns for lower and upper window bounds or a
length 2 difftime vector</p></dd>


<dt>expr</dt>
<dd><p>Expression (quoted for <code>*_quo</code> and unquoted otherwise) to be
evaluated over each window</p></dd>


<dt>before, after</dt>
<dd><p>Time span to look back/forward</p></dd>


<dt>index</dt>
<dd><p>A vector of times around which windows are spanned (relative
to the index)</p></dd>


<dt>windows</dt>
<dd><p>An <code>icu_tbl</code> defining the windows to span</p></dd>


<dt>full_window</dt>
<dd><p>Logical flag controlling how the situation is handled
where the sliding window extends beyond available data</p></dd>


<dt>lwr_col, upr_col</dt>
<dd><p>Names of columns (in <code>windows</code>) of lower/upper
window bounds</p></dd>


<dt>left_closed, right_closed</dt>
<dd><p>Logical flag indicating whether intervals
are closed (default) or open.</p></dd>


<dt>eval_env</dt>
<dd><p>Environment in which <code>expr</code> is substituted; <code>NULL</code> resolves
to the environment in which <code>expr</code> was created</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Most functions return <code>ts_tbl</code> objects with the exception of
<code>has_gaps()</code>/<code>has_no_gaps()</code>/<code>is_regular()</code>, which return logical flags.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>A gap in a <code>ts_tbl</code> object is a missing time step, i.e. a missing entry in
the sequence <code>seq(min(index), max(index), by = interval)</code> in at least one
group (as defined by <code><a href="tbl_meta.html">id_vars()</a></code>, where the extrema are calculated per
group. In this case, <code>has_gaps()</code> will return <code>TRUE</code>. The function
<code>is_regular()</code> checks whether the time series has no gaps, in addition to
the object being sorted and unique (see <code><a href="tbl_utils.html">is_sorted()</a></code> and <code><a href="tbl_utils.html">is_unique()</a></code>).
In order to transform a time series containing gaps into a regular time
series, <code>fill_gaps()</code> will fill missing time steps with <code>NA</code> values in all
<code><a href="tbl_meta.html">data_vars()</a></code> columns, while <code>remove_gaps()</code> provides the inverse operation
of removing time steps that consist of <code>NA</code> values in <code><a href="tbl_meta.html">data_vars()</a></code> columns.</p>
<p>An <code>expand()</code> operation performed on an object inheriting from <code>data.table</code>
yields a <code>ts_tbl</code> where time-steps encoded by columns <code>start_var</code> and
<code>end_var</code> are made explicit with values in <code>keep_vars</code> being appropriately
repeated. The inverse operation is available as <code>collapse()</code>, which groups
by <code>id_vars</code>, represents <code>index_var</code> as group-wise extrema in two new
columns <code>start_var</code> and <code>end_var</code> and allows for further data summary using
<code>...</code>. An aspect to keep in mind when applying <code>expand()</code> to a <code>win_tbl</code>
object is that values simply are repeated for all time-steps that fall into
a given validity interval. This gives correct results when a <code>win_tbl</code> for
example contains data on infusions as rates, but might not lead to correct
results when infusions are represented as drug amounts administered over a
given time-span. In such a scenario it might be desirable to evenly
distribute the total amount over the corresponding time steps (currently not
implemented).</p>
<p>Sliding-window type operations are available as <code>slide()</code>, <code>slide_index()</code>
and <code>hop()</code> (function naming is inspired by the CRAN package <code>slider</code>). The
most flexible of the three, <code>hop</code> takes as input a <code>ts_tbl</code> object <code>x</code>
containing the data, an <code>id_tbl</code> object <code>windows</code>, containing for each ID
the desired windows represented by two columns <code>lwr_col</code> and <code>upr_col</code>, as
well as an expression <code>expr</code> to be evaluated per window. At the other end
of the spectrum, <code>slide()</code> spans windows for every ID and available
time-step using the arguments <code>before</code> and <code>after</code>, while <code>slide_index()</code>
can be seen as a compromise between the two, where windows are spanned for
certain time-points, specified by <code>index</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="id_tbl.html">ts_tbl</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, y <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, z <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>, val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              index_var <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">exp</span> <span class="op">&lt;-</span> <span class="fu">expand</span><span class="op">(</span><span class="va">tbl</span>, <span class="st">"y"</span>, <span class="st">"z"</span>, step_size <span class="op">=</span> <span class="fl">1L</span>, new_index <span class="op">=</span> <span class="st">"y"</span>,</span></span>
<span class="r-in"><span>              keep_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"val"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">col</span> <span class="op">&lt;-</span> <span class="fu">collapse</span><span class="op">(</span><span class="va">exp</span>, start_var <span class="op">=</span> <span class="st">"y"</span>, end_var <span class="op">=</span> <span class="st">"z"</span>, val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">val</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="va">col</span>, check.attributes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Column 'z': Mean relative difference: 0.75"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="id_tbl.html">ts_tbl</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sequence.html" class="external-link">sequence</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>, z <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">win</span> <span class="op">&lt;-</span> <span class="fu"><a href="id_tbl.html">id_tbl</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>, a <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, b <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">hop</span><span class="op">(</span><span class="va">tbl</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span><span class="op">)</span>, <span class="va">win</span>, lwr_col <span class="op">=</span> <span class="st">"a"</span>, upr_col <span class="op">=</span> <span class="st">"b"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x       b       a  z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 3 3 hours 2 hours 11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 4 4 hours 1 hours 34</span>
<span class="r-in"><span><span class="fu">slide_index</span><span class="op">(</span><span class="va">tbl</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>, before <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x       y  z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 1 4 hours NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 1 5 hours NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 2 4 hours  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 2 5 hours NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 3 4 hours 11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 3 5 hours  6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: 4 4 hours 27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 4 5 hours 19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 5 4 hours 39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 5 5 hours 42</span>
<span class="r-in"><span><span class="fu">slide</span><span class="op">(</span><span class="va">tbl</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span><span class="op">)</span>, before <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x       y  z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 1 1 hours  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 2 1 hours  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 2 2 hours  5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 3 1 hours  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 3 2 hours  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 5 1 hours 11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: 5 2 hours 23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: 5 3 hours 36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: 5 4 hours 39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: 5 5 hours 42</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="id_tbl.html">ts_tbl</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sequence.html" class="external-link">sequence</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>, z <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">has_no_gaps</span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">is_regular</span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">has_no_gaps</span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">is_regular</span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span><span class="op">[</span><span class="fl">6</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="difftime.html">hours</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">has_no_gaps</span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="fu">is_regular</span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nicolas Bennett, Drago Plecko, Ida-Fong Ukor.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>


<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Function reference â€¢ ICU data with R</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Function reference" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-index">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ICU data with R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ricu.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/jss.pdf">ricu: R's Interface to Intensive Care Data (PDF)</a>
    </li>
    <li>
      <a href="../articles/uom.html">Units of measurement</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/eth-mds/ricu">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Reference</h1>
    </div>

    <table class="ref-index">

    <colgroup>
      
      <col class="alias" />
      <col class="title" />
    </colgroup>

    <tbody>
      <tr>
        <th colspan="2">
          <h2 id="section-data-loading" class="hasAnchor"><a href="#section-data-loading" class="anchor"></a>Data loading</h2>
          <p class="section-desc"><p>Data can be loaded from cofigured data sources, either in the form of data concepts or by directly querying one of the underlying tables. Depending on what route is taken for loading, data is returned either as <code>data.table</code> or as one of the <code>ricu</code>-provided tabular data types <code>id_tbl</code> or <code>ts_tbl</code>.</p></p>
        </th>
      </tr>
      
      
    </tbody><tbody>
      
      <tr>
        <th colspan="2">
          <h3 id="section-concept-loading" class="hasAnchor"><a href="#section-concept-loading" class="anchor"></a>Concept loading</h3>
          <p class="section-desc"><p>Data concepts in <code>ricu</code> provide an abstraction that allows to define how a clinical concept (such as heart rate) can be retrieved from a data source. Once defined, concepts can be loaded in a data source agnostic and concise manner.</p></p>
        </th>
      </tr>
      
    </tbody><tbody>
      
      
      <tr>
        
        <td>
          <p><code><a href="load_concepts.html">load_concepts()</a></code> </p>
        </td>
        <td><p>Load concept data</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="data_concepts.html">new_cncpt()</a></code> <code><a href="data_concepts.html">is_cncpt()</a></code> <code><a href="data_concepts.html">init_cncpt()</a></code> <code><a href="data_concepts.html">new_concept()</a></code> <code><a href="data_concepts.html">concept()</a></code> <code><a href="data_concepts.html">is_concept()</a></code> <code><a href="data_concepts.html">as_concept()</a></code> </p>
        </td>
        <td><p>Data Concepts</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="data_items.html">new_itm()</a></code> <code><a href="data_items.html">is_itm()</a></code> <code><a href="data_items.html">init_itm()</a></code> <code><a href="data_items.html">new_item()</a></code> <code><a href="data_items.html">item()</a></code> <code><a href="data_items.html">as_item()</a></code> <code><a href="data_items.html">is_item()</a></code> </p>
        </td>
        <td><p>Data items</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="concept_dictionary.html">load_dictionary()</a></code> <code><a href="concept_dictionary.html">concept_availability()</a></code> <code><a href="concept_dictionary.html">explain_dictionary()</a></code> </p>
        </td>
        <td><p>Load concept dictionaries</p></td>
      </tr>
    </tbody><tbody>
      
      <tr>
        <th colspan="2">
          <h3 id="section-callback-functions" class="hasAnchor"><a href="#section-callback-functions" class="anchor"></a>Callback functions</h3>
          <p class="section-desc"><p>To provided the required flexibility for defining data concepts, individual items can specify callback functions that are used for post-processing steps for loaded data. Some function fatories are provided for creating simple callback functions and more involved scenarios, such as a SOFA score concept require specialized functions, which might even expose function arguments which can be used to fine-tune the concept bahavior.</p></p>
        </th>
      </tr>
      
    </tbody><tbody>
      
      
      <tr>
        
        <td>
          <p><code><a href="callback_itm.html">transform_fun()</a></code> <code><a href="callback_itm.html">binary_op()</a></code> <code><a href="callback_itm.html">comp_na()</a></code> <code><a href="callback_itm.html">set_val()</a></code> <code><a href="callback_itm.html">apply_map()</a></code> <code><a href="callback_itm.html">convert_unit()</a></code> </p>
        </td>
        <td><p>Item callback utilities</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="cli_output.html">msg_progress()</a></code> <code><a href="cli_output.html">fmt_msg()</a></code> </p>
        </td>
        <td><p>Message signaling nested with progress reporting</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="callback_cncpt.html">pafi()</a></code> <code><a href="callback_cncpt.html">safi()</a></code> <code><a href="callback_cncpt.html">vent_ind()</a></code> <code><a href="callback_cncpt.html">gcs()</a></code> <code><a href="callback_cncpt.html">urine24()</a></code> <code><a href="callback_cncpt.html">vaso60()</a></code> <code><a href="callback_cncpt.html">vaso_ind()</a></code> <code><a href="callback_cncpt.html">supp_o2()</a></code> <code><a href="callback_cncpt.html">avpu()</a></code> <code><a href="callback_cncpt.html">bmi()</a></code> <code><a href="callback_cncpt.html">norepi_equiv()</a></code> </p>
        </td>
        <td><p>Concept callback functions</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="callback_sofa.html">sofa_score()</a></code> <code><a href="callback_sofa.html">sofa_resp()</a></code> <code><a href="callback_sofa.html">sofa_coag()</a></code> <code><a href="callback_sofa.html">sofa_liver()</a></code> <code><a href="callback_sofa.html">sofa_cardio()</a></code> <code><a href="callback_sofa.html">sofa_cns()</a></code> <code><a href="callback_sofa.html">sofa_renal()</a></code> </p>
        </td>
        <td><p>SOFA score label</p></td>
      </tr>
    </tbody><tbody>
      
      <tr>
        <th colspan="2">
          <h3 id="section-query-loading" class="hasAnchor"><a href="#section-query-loading" class="anchor"></a>Query loading</h3>
          <p class="section-desc"><p>Tables can be queried directly by creating an R expression that evaluates to a logical vector indicating which rows to load. The expression is evaluated within the data context, powered by the non-standard evaluation framework provided by <code>rlang</code>.</p></p>
        </th>
      </tr>
      
    </tbody><tbody>
      
      
      <tr>
        
        <td>
          <p><code><a href="load_tbl.html">load_id()</a></code> <code><a href="load_tbl.html">load_ts()</a></code> <code><a href="load_tbl.html">load_win()</a></code> </p>
        </td>
        <td><p>Load data as <code>id_tbl</code> or <code>ts_tbl</code> objects</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="load_src.html">load_src()</a></code> <code><a href="load_src.html">load_difftime()</a></code> </p>
        </td>
        <td><p>Low level functions for loading data</p></td>
      </tr>
    </tbody><tbody>
      <tr>
        <th colspan="2">
          <h2 id="section-tabular-icu-data" class="hasAnchor"><a href="#section-tabular-icu-data" class="anchor"></a>Tabular ICU data</h2>
          <p class="section-desc"><p>Inheriting from <code>data.table</code>, <code>ricu</code> provides classes intended to simplify handling of tabular ICU data. For dynamic (i.e.Â time-varying) data (such as vital sign data), <code>ts_tbl</code> is used and for static data (for example an admission diagnonsis), <code>id_tbl</code> objects are used. Alongside these data structures, several utility functions are provided.</p></p>
        </th>
      </tr>
      
      
    </tbody><tbody>
      
      
      <tr>
        
        <td>
          <p><code><a href="id_tbl.html">id_tbl()</a></code> <code><a href="id_tbl.html">is_id_tbl()</a></code> <code><a href="id_tbl.html">as_id_tbl()</a></code> <code><a href="id_tbl.html">ts_tbl()</a></code> <code><a href="id_tbl.html">is_ts_tbl()</a></code> <code><a href="id_tbl.html">as_ts_tbl()</a></code> <code><a href="id_tbl.html">win_tbl()</a></code> <code><a href="id_tbl.html">is_win_tbl()</a></code> <code><a href="id_tbl.html">as_win_tbl()</a></code> <code><a href="id_tbl.html">as.data.table(<i>&lt;id_tbl&gt;</i>)</a></code> <code><a href="id_tbl.html">as.data.frame(<i>&lt;id_tbl&gt;</i>)</a></code> <code><a href="id_tbl.html">validate_tbl()</a></code> </p>
        </td>
        <td><p>Tabular ICU data classes</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="tbl_meta.html">id_vars()</a></code> <code><a href="tbl_meta.html">id_var()</a></code> <code><a href="tbl_meta.html">id_col()</a></code> <code><a href="tbl_meta.html">index_var()</a></code> <code><a href="tbl_meta.html">index_col()</a></code> <code><a href="tbl_meta.html">dur_var()</a></code> <code><a href="tbl_meta.html">dur_col()</a></code> <code><a href="tbl_meta.html">dur_unit()</a></code> <code><a href="tbl_meta.html">meta_vars()</a></code> <code><a href="tbl_meta.html">data_vars()</a></code> <code><a href="tbl_meta.html">data_var()</a></code> <code><a href="tbl_meta.html">data_col()</a></code> <code><a href="tbl_meta.html">interval()</a></code> <code><a href="tbl_meta.html">time_unit()</a></code> <code><a href="tbl_meta.html">time_step()</a></code> <code><a href="tbl_meta.html">time_vars()</a></code> </p>
        </td>
        <td><p>ICU class meta data utilities</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="tbl_utils.html">rename_cols()</a></code> <code><a href="tbl_utils.html">rm_cols()</a></code> <code><a href="tbl_utils.html">change_interval()</a></code> <code><a href="tbl_utils.html">change_dur_unit()</a></code> <code><a href="tbl_utils.html">rm_na()</a></code> <code><a href="tbl_utils.html">sort(<i>&lt;id_tbl&gt;</i>)</a></code> <code><a href="tbl_utils.html">is_sorted()</a></code> <code><a href="tbl_utils.html">duplicated(<i>&lt;id_tbl&gt;</i>)</a></code> <code><a href="tbl_utils.html">anyDuplicated(<i>&lt;id_tbl&gt;</i>)</a></code> <code><a href="tbl_utils.html">unique(<i>&lt;id_tbl&gt;</i>)</a></code> <code><a href="tbl_utils.html">is_unique()</a></code> <code><a href="tbl_utils.html">aggregate(<i>&lt;id_tbl&gt;</i>)</a></code> <code><a href="tbl_utils.html">dt_gforce()</a></code> <code><a href="tbl_utils.html">replace_na()</a></code> </p>
        </td>
        <td><p>ICU class data utilities</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="ts_utils.html">expand()</a></code> <code><a href="ts_utils.html">collapse()</a></code> <code><a href="ts_utils.html">has_no_gaps()</a></code> <code><a href="ts_utils.html">has_gaps()</a></code> <code><a href="ts_utils.html">is_regular()</a></code> <code><a href="ts_utils.html">fill_gaps()</a></code> <code><a href="ts_utils.html">remove_gaps()</a></code> <code><a href="ts_utils.html">slide()</a></code> <code><a href="ts_utils.html">slide_index()</a></code> <code><a href="ts_utils.html">hop()</a></code> </p>
        </td>
        <td><p>Time series utility functions</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="change_id.html">change_id()</a></code> <code><a href="change_id.html">upgrade_id()</a></code> <code><a href="change_id.html">downgrade_id()</a></code> </p>
        </td>
        <td><p>Switch between id types</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="stay_windows.html">stay_windows()</a></code> </p>
        </td>
        <td><p>Stays</p></td>
      </tr>
    </tbody><tbody>
      <tr>
        <th colspan="2">
          <h2 id="section-data-source-setup" class="hasAnchor"><a href="#section-data-source-setup" class="anchor"></a>Data source setup</h2>
          <p class="section-desc"><p>For a data source to be usable via <code>ricu</code>, a JSON-based configuration is required and some preprocessing is carried out by <code>ricu</code> as an initial setup step by <code><a href="../reference/import_src.html">import_src()</a></code> and for data sets hosted on <a href="https://physionet.org">Physionet</a>, a downloader is available as <code><a href="../reference/download_src.html">download_src()</a></code>. As a final step, making data available to <code>ricu</code>, <code><a href="../reference/attach_src.html">attach_src()</a></code> is automatically called for configured data sources at package loading.</p></p>
        </th>
      </tr>
      
      
    </tbody><tbody>
      
      
      <tr>
        
        <td>
          <p><code><a href="data_env.html">data</a></code> </p>
        </td>
        <td><p>ICU datasets</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="download.html">download_src()</a></code> </p>
        </td>
        <td><p>Data download utilities</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="import.html">import_src()</a></code> <code><a href="import.html">import_tbl()</a></code> </p>
        </td>
        <td><p>Data import utilities</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="attach_src.html">attach_src()</a></code> <code><a href="attach_src.html">detach_src()</a></code> <code><a href="attach_src.html">setup_src_env()</a></code> </p>
        </td>
        <td><p>Data attach utilities</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="setup_src_data.html">setup_src_data()</a></code> </p>
        </td>
        <td><p>Data setup</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="load_src_cfg.html">load_src_cfg()</a></code> </p>
        </td>
        <td><p>Load configuration for a data source</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="file_utils.html">data_dir()</a></code> <code><a href="file_utils.html">src_data_dir()</a></code> <code><a href="file_utils.html">auto_attach_srcs()</a></code> <code><a href="file_utils.html">config_paths()</a></code> <code><a href="file_utils.html">get_config()</a></code> <code><a href="file_utils.html">set_config()</a></code> </p>
        </td>
        <td><p>File system utilities</p></td>
      </tr>
    </tbody><tbody>
      <tr>
        <th colspan="2">
          <h2 id="section-utilities" class="hasAnchor"><a href="#section-utilities" class="anchor"></a>Utilities</h2>
          <p class="section-desc"></p>
        </th>
      </tr>
      
      
    </tbody><tbody>
      
      
      <tr>
        
        <td>
          <p><code><a href="difftime.html">secs()</a></code> <code><a href="difftime.html">mins()</a></code> <code><a href="difftime.html">hours()</a></code> <code><a href="difftime.html">days()</a></code> <code><a href="difftime.html">weeks()</a></code> </p>
        </td>
        <td><p>Utilities for <code>difftime</code></p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="utils.html">min_or_na()</a></code> <code><a href="utils.html">max_or_na()</a></code> <code><a href="utils.html">is_val()</a></code> <code><a href="utils.html">not_val()</a></code> <code><a href="utils.html">is_true()</a></code> <code><a href="utils.html">is_false()</a></code> <code><a href="utils.html">last_elem()</a></code> <code><a href="utils.html">first_elem()</a></code> </p>
        </td>
        <td><p>Utility functions</p></td>
      </tr><tr>
        
        <td>
          <p><code><a href="data_export.html">write_psv()</a></code> <code><a href="data_export.html">read_psv()</a></code> </p>
        </td>
        <td><p>Read and write utilities</p></td>
      </tr>
    </tbody>
    </table>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nicolas Bennett, Drago Plecko, Ida-Fong Ukor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



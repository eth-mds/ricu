<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Internal utilities for working with data source configurations — new_src_cfg • ICU data with R</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Internal utilities for working with data source configurations — new_src_cfg" />
<meta property="og:description" content="Data source configuration objects store information on data sources used
throughout ricu. This includes URLs for data set downloading, Column
specifications used for data set importing, default values per table for
important columns such as index columns when loading data and how different
patient identifiers used throughout a dataset relate to another. Per
dataset, a src_cfg object is created from a JSON file (see
load_src_cfg()), consisting of several helper-classes compartmentalizing
the pieces of information outlined above. Alongside constructors for the
various classes, several utilities, such as inheritance checks, coercion
functions, as well as functions to extract pieces of information from these
objects are provided." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ICU data with R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ricu.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/jss.pdf">ricu: R's Interface to Intensive Care Data (PDF)</a>
    </li>
    <li>
      <a href="../articles/uom.html">Units of measurement</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/eth-mds/ricu">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Internal utilities for working with data source configurations</h1>
    
    <div class="hidden name"><code>src_cfg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Data source configuration objects store information on data sources used
throughout <code>ricu</code>. This includes URLs for data set downloading, Column
specifications used for data set importing, default values per table for
important columns such as index columns when loading data and how different
patient identifiers used throughout a dataset relate to another. Per
dataset, a <code>src_cfg</code> object is created from a JSON file (see
<code><a href='load_src_cfg.html'>load_src_cfg()</a></code>), consisting of several helper-classes compartmentalizing
the pieces of information outlined above. Alongside constructors for the
various classes, several utilities, such as inheritance checks, coercion
functions, as well as functions to extract pieces of information from these
objects are provided.</p>
    </div>

    <pre class="usage"><span class='fu'>new_src_cfg</span><span class='op'>(</span><span class='va'>name</span>, <span class='va'>id_cfg</span>, <span class='va'>col_cfg</span>, <span class='va'>tbl_cfg</span>, <span class='va'>...</span>, class_prefix <span class='op'>=</span> <span class='va'>name</span><span class='op'>)</span>

<span class='fu'>new_id_cfg</span><span class='op'>(</span>
  <span class='va'>src</span>,
  <span class='va'>name</span>,
  <span class='va'>id</span>,
  pos <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>name</span><span class='op'>)</span>,
  start <span class='op'>=</span> <span class='cn'>NULL</span>,
  end <span class='op'>=</span> <span class='cn'>NULL</span>,
  table <span class='op'>=</span> <span class='cn'>NULL</span>,
  class_prefix <span class='op'>=</span> <span class='va'>src</span>
<span class='op'>)</span>

<span class='fu'>new_col_cfg</span><span class='op'>(</span><span class='va'>src</span>, <span class='va'>table</span>, <span class='va'>...</span>, class_prefix <span class='op'>=</span> <span class='va'>src</span><span class='op'>)</span>

<span class='fu'>new_tbl_cfg</span><span class='op'>(</span>
  <span class='va'>src</span>,
  <span class='va'>table</span>,
  files <span class='op'>=</span> <span class='cn'>NULL</span>,
  cols <span class='op'>=</span> <span class='cn'>NULL</span>,
  num_rows <span class='op'>=</span> <span class='cn'>NULL</span>,
  partitioning <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>,
  class_prefix <span class='op'>=</span> <span class='va'>src</span>
<span class='op'>)</span>

<span class='fu'>is_src_cfg</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>as_src_cfg</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>is_id_cfg</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>as_id_cfg</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>is_col_cfg</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>as_col_cfg</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>is_tbl_cfg</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>as_tbl_cfg</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>src_name</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>tbl_name</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>src_extra_cfg</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>src_prefix</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>src_url</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>id_var_opts</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>default_vars</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>type</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>name</th>
      <td><p>Name of the data source</p></td>
    </tr>
    <tr>
      <th>id_cfg</th>
      <td><p>An <code>id_cfg</code> object for the given data source</p></td>
    </tr>
    <tr>
      <th>col_cfg</th>
      <td><p>A list of <code>col_cfg</code> objects representing column defaults for
all tables of the</p></td>
    </tr>
    <tr>
      <th>tbl_cfg</th>
      <td><p>A list of <code>tbl_cfg</code> containing information on how tables are
organized (may be <code>NULL</code>)</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further objects to add (such as an URL specification)</p></td>
    </tr>
    <tr>
      <th>class_prefix</th>
      <td><p>A character vector of class prefixes that are added to
the instantiated classes</p></td>
    </tr>
    <tr>
      <th>src</th>
      <td><p>Data source name</p></td>
    </tr>
    <tr>
      <th>id, start, end</th>
      <td><p>Name(s) of ID column(s), as well as respective start
and end timestamps</p></td>
    </tr>
    <tr>
      <th>pos</th>
      <td><p>Integer valued position, ordering IDs by their cardinality</p></td>
    </tr>
    <tr>
      <th>table</th>
      <td><p>Table name</p></td>
    </tr>
    <tr>
      <th>cols</th>
      <td><p>List containing a list per column each holding string valued
entries <code>name</code> (column name as used by <code>ricu</code>), <code>col</code> (column name as used
in the raw data) and <code>spec</code> (name of <code><a href='https://readr.tidyverse.org/reference/cols.html'>readr::cols()</a></code> column specification).
Further entries will be passed as argument to the respective <code>readr</code> column
specification</p></td>
    </tr>
    <tr>
      <th>num_rows</th>
      <td><p>A count indicating the expected number of rows</p></td>
    </tr>
    <tr>
      <th>partitioning</th>
      <td><p>A table partitioning is defined by a column name and a
vector of numeric values that are passed as <code>vec</code> argument to
<code><a href='https://rdrr.io/r/base/findInterval.html'>base::findInterval()</a></code></p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Object to coerce/query</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Constructors <code>new_*()</code> as well as coercion functions <code>as_*()</code>
return the respective objects, while inheritance tester functions <code>is_*()</code>
return a logical flag.</p><ul>
<li><p><code>src_url()</code>: string valued data source URL</p></li>
<li><p><code>id_var_opts()</code>: character vector of ID variable options</p></li>
<li><p><code>src_name()</code>: string valued data source name</p></li>
<li><p><code>tbl_name()</code>: string valued table name</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The following classes are used to represent data source configuration
objects:</p><ul>
<li><p><code>src_cfg</code>: wraps objects <code>id_cfg</code>, <code>col_cfg</code> and optionally <code>tbl_cfg</code></p></li>
<li><p><code>id_cfg</code>: contains information in ID systems and is created from <code>id_cfg</code>
entries in config files</p></li>
<li><p><code>col_cfg</code>: contains column default settings represented by <code>defaults</code>
entries in table configuration blocks</p></li>
<li><p><code>tbl_cfg</code>: used when importing data and therefore encompasses information
in <code>files</code>, <code>num_rows</code> and <code>cols</code> entries of table configuration blocks</p></li>
</ul>

<p>Represented by a <code>col_cfg</code>, a table can have some of its columns marked as
default columns for the following concepts and further column meanings can
be specified via <code>...</code>:</p><ul>
<li><p><code>id_col</code>: column will be used for as id for <code>icu_tbl</code> objects</p></li>
<li><p><code>index_col</code>: column represents a timestamp variable and will be use as
such for <code>ts_tbl</code> objects</p></li>
<li><p><code>val_col</code>: column contains the measured variable of interest</p></li>
<li><p><code>unit_col</code>: column specifies the unit of measurement in the corresponding
<code>val_col</code></p></li>
</ul>

<p>Alongside constructors (<code>new_*()</code>), inheritance checking functions
(<code>is_*()</code>), as well as coercion functions (<code>as_*(</code>), relevant utility
functions include:</p><ul>
<li><p><code>src_url()</code>: retrieve the URL of a data source</p></li>
<li><p><code>id_var_opts()</code>: column name(s) corresponding to ID systems</p></li>
<li><p><code>src_name()</code>: name of the data source</p></li>
<li><p><code>tbl_name()</code>: name of a table</p></li>
</ul>

<p>Coercion between objects under some circumstances can yield list-of object
return types. For example when coercing <code>src_cfg</code> to <code>tbl_cfg</code>, this will
result in a list of <code>tbl_cfg</code> objects, as multiple tables typically
correspond to a data source.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nicolas Bennett, Drago Plecko, Ida-Fong Ukor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



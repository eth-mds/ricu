<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Data loading utilities — id_origin • ICU data with R</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Data loading utilities — id_origin" />
<meta property="og:description" content="Two important tools for smoothing out differences among used datasets are
id_origin() which returns origin times for a given ID and id_map()
which returns a mapping between two ID systems alongside start and end
columns of the target ID system relative to the source ID system. As both
these function are called frequently during data loading and might involve
somewhat expensive operations, both rely on internal helper functions
(id_orig_helper() and id_map_helper()) which perform the heavy lifting
and wrap those helper functions, providing a memoization layer. When adding
a new data source, a class specific implementation of the S3 generic
function id_map_helper() might be required, as this is used during data
loading using load_id() and load_ts() via change_id()." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ICU data with R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ricu.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/jss.pdf">ricu: R's Interface to Intensive Care Data (PDF)</a>
    </li>
    <li>
      <a href="../articles/uom.html">Units of measurement</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/eth-mds/ricu">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Data loading utilities</h1>
    
    <div class="hidden name"><code>data_utils.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Two important tools for smoothing out differences among used datasets are
<code>id_origin()</code> which returns origin times for a given ID and <code>id_map()</code>
which returns a mapping between two ID systems alongside start and end
columns of the target ID system relative to the source ID system. As both
these function are called frequently during data loading and might involve
somewhat expensive operations, both rely on internal helper functions
(<code>id_orig_helper()</code> and <code>id_map_helper()</code>) which perform the heavy lifting
and wrap those helper functions, providing a memoization layer. When adding
a new data source, a class specific implementation of the S3 generic
function <code>id_map_helper()</code> might be required, as this is used during data
loading using <code><a href='load_id.html'>load_id()</a></code> and <code><a href='load_id.html'>load_ts()</a></code> via <code><a href='change_id.html'>change_id()</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>id_origin</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>id</span>, origin_name <span class='op'>=</span> <span class='cn'>NULL</span>, copy <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'>id_orig_helper</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>id</span><span class='op'>)</span>

<span class='co'># S3 method for src_env</span>
<span class='fu'>id_orig_helper</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>id</span><span class='op'>)</span>

<span class='co'># S3 method for miiv_env</span>
<span class='fu'>id_orig_helper</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>id</span><span class='op'>)</span>

<span class='fu'>id_windows</span><span class='op'>(</span><span class='va'>x</span>, copy <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'>id_win_helper</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='co'># S3 method for mimic_env</span>
<span class='fu'>id_win_helper</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='co'># S3 method for eicu_env</span>
<span class='fu'>id_win_helper</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='co'># S3 method for hirid_env</span>
<span class='fu'>id_win_helper</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='co'># S3 method for aumc_env</span>
<span class='fu'>id_win_helper</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='co'># S3 method for miiv_env</span>
<span class='fu'>id_win_helper</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>id_map</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>id_var</span>, <span class='va'>win_var</span>, in_time <span class='op'>=</span> <span class='cn'>NULL</span>, out_time <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>id_map_helper</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>id_var</span>, <span class='va'>win_var</span><span class='op'>)</span>

<span class='co'># S3 method for src_env</span>
<span class='fu'>id_map_helper</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>id_var</span>, <span class='va'>win_var</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Object identify the ID system (passed to <code><a href='new_src_tbl.html'>as_src_env()</a></code>)</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>ID name for which to return origin times</p></td>
    </tr>
    <tr>
      <th>origin_name</th>
      <td><p>String-valued name which will be used to label the origin
column</p></td>
    </tr>
    <tr>
      <th>copy</th>
      <td><p>Logical flag indicating whether to return a copy of the memoized
<code>0data.table</code> for safety</p></td>
    </tr>
    <tr>
      <th>id_var</th>
      <td><p>Type of ID all returned times are relative to</p></td>
    </tr>
    <tr>
      <th>win_var</th>
      <td><p>Type of ID for which the in/out times is returned</p></td>
    </tr>
    <tr>
      <th>in_time, out_time</th>
      <td><p>column names of the returned in/out times</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    
<ul>
<li><p><code>id_origin()</code>/<code>id_orig_helper()</code>: an <code>id_tbl</code> with admission time stamps
corresponding to the selected ID</p></li>
<li><p><code>id_windows()</code>/<code>id_win_helper()</code>: an <code>id_tbl</code> holding all IDs and their
respective start and end times</p></li>
<li><p><code>id_map()</code>/<code>id_map_helper()</code>: an <code>id_tbl</code> containing the selected IDs and
depending on values passed as <code>in_time</code> and <code>out_time</code>, start and end
times of the ID passed as <code>win_var</code></p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For the internal datasets, <code>id_map_helper()</code> relies on yet another S3
generic function <code>id_windows()</code>, which provides a table containing all
available ID systems, as well as all ID windows for a given data source. As
for the other two functions, the same helper-function approach is in place,
with the data loading function <code>id_win_helper()</code>. The function
<code>id_map_helper()</code> is then implemented in a data source agnostic manner
(dispatching on the <code>src_env</code> class), providing subsetting of this larger
ID map table and ensuring timestamps are relative to the correct ID system.
For adding a new data source however, this layer can be forgone. Similarly
for <code>id_origin()</code>, this is used for the internal datasets in
<code><a href='load_src.html'>load_difftime()</a></code>. An implementation of <code><a href='load_src.html'>load_difftime()</a></code>, specific to a
new data source can be provided that does not rely on <code>id_windows()</code>,
making this function irrelevant for this specific dataset.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nicolas Bennett, Drago Plecko, Ida-Fong Ukor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


